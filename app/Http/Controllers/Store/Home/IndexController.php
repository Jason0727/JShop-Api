<?php

namespace App\Http\Controllers\Store\Home;

use App\Constant\ApiConstant;
use App\Http\Controllers\Controller;
use App\Http\Services\BannerService;
use App\Http\Services\HomeService;
use App\Http\Services\StoreService;
use App\Models\Banner;

class IndexController extends Controller
{
    /**
     * 首页
     *
     * @return false|string
     */
    public function __invoke()
    {
        # 模块(分类未处理)
        $moduleList = HomeService::getModuleList();
        # 轮播图
        $bannerList = HomeService::getBannerList(Banner::SCENE_HOME_INDEX);
        # 导航
        $homeNavList = HomeService::getHomeNavList();
        # 商城配置
        $store = StoreService::getStoreConfig();

        # 返回
        $data = [
            'module_list' => $moduleList,
            'banner_list' => $bannerList,
            'home_nav_list' => $homeNavList,
            'store' => $store
        ];

        return apiResponse(ApiConstant::SUCCESS, ApiConstant::SUCCESS_MSG, $data);

//        echo '{"code":1,"msg":"success","data":{"module_list":[{"name":"search"},{"name":"banner"},{"name":"notice"},{"name":"coupon"},{"name":"nav"},{"name":"miaosha"},{"name":"pintuan"},{"name":"yuyue"},{"name":"block","block_id":"1"},{"name":"single_cat","cat_id":"1"}],"store":{"id":1,"name":"独立版","copyright":"","copyright_pic_url":"","copyright_url":"","contact_tel":"13601587485","show_customer_service":1,"cat_style":4,"address":"","is_offline":1,"is_coupon":1,"is_comment":1,"is_share_price":1,"is_member_price":1,"dial":1,"dial_pic":"http://hshop.com/web/uploads/image/store_1/42950f3c9b3aed78052a374576d810cfaaf3e258.jpg","service":"http://hshop.com/web/uploads/image/store_1/160fad3f3accb5e25520c508e1e6a49189219327.jpg","cut_thread":1,"option":{"step":"","service":"http://hshop.com/web/uploads/image/store_1/160fad3f3accb5e25520c508e1e6a49189219327.jpg","web_service":"http://hshop.com/web/uploads/image/store_1/684b5ccb40094f56806046ffbe9788dff63e6b5a.jpg","web_service_url":"","wxapp":{"status":"1","pic_url":"http://hshop.com/web/uploads/image/store_1/1d58a8048145e49e18d0e3b0695c8759b60a8797.jpg","appid":"1111","path":"pages/index/index"},"quick_navigation":{"type":"0","home_img":"http://hshop.com/web/uploads/image/store_1/be34db0aa339f09d621f23669c25b2ca6b4dad24.png"},"phone_auth":"1","good_negotiable":{"contact":"1","tel":"1","web_contact":"1"},"quick_map":{"status":"1","icon":"http://hshop.com/web/uploads/image/store_1/684b5ccb40094f56806046ffbe9788dff63e6b5a.jpg","address":"请问","lal":"39.915945,116.395913"},"web_service_status":"0"},"purchase_frame":1,"is_sales":1,"quick_navigation":{"type":"0","home_img":"http://hshop.com/web/uploads/image/store_1/be34db0aa339f09d621f23669c25b2ca6b4dad24.png"},"good_negotiable":{"contact":"1","tel":"1","web_contact":"1"},"buy_member":1,"logo":"","is_official_account":1,"share_custom_data":{"menus":{"money":{"name":"分销佣金","icon":"http://hshop.com/web/statics/images/share-custom/img-share-price.png","open_type":"navigator","url":"/pages/share-money/share-money","tel":""},"order":{"name":"分销订单","icon":"http://hshop.com/web/statics/images/share-custom/img-share-order.png","open_type":"navigator","url":"/pages/share-order/share-order","tel":""},"cash":{"name":"提现明细","icon":"http://hshop.com/web/statics/images/share-custom/img-share-cash.png","open_type":"navigator","url":"/pages/cash-detail/cash-detail","tel":""},"team":{"name":"我的团队","icon":"http://hshop.com/web/statics/images/share-custom/img-share-team.png","open_type":"navigator","url":"/pages/share-team/share-team","tel":""},"qrcode":{"name":"推广二维码","icon":"http://hshop.com/web/statics/images/share-custom/img-share-qrcode.png","open_type":"navigator","url":"/pages/share-qrcode/share-qrcode","tel":""}},"words":{"can_be_presented":{"name":"可提现佣金","default":"可提现佣金"},"already_presented":{"name":"已提现佣金","default":"已提现佣金"},"parent_name":{"name":"推荐人","default":"推荐人"},"pending_money":{"name":"待打款佣金","default":"待打款佣金"},"cash":{"name":"提现","default":"提现"},"user_instructions":{"name":"用户须知","default":"用户须知"},"apply_cash":{"name":"我要提现","default":"我要提现"},"cash_type":{"name":"提现方式","default":"提现方式"},"cash_money":{"name":"提现金额","default":"提现金额"},"order_money_un":{"name":"未结算佣金","default":"未结算佣金"},"share_name":{"name":"分销商","default":"分销商"}}}},"banner_list":[{"id":"1","store_id":"1","pic_url":"http://hshop.com/web/uploads/image/store_1/4d7d7f7322e9ce97a576e219fa7385cd71869861.png","title":"1","page_url":"","sort":"100","addtime":"1583724551","is_delete":"0","type":"1","open_type":"navigate"},{"id":"2","store_id":"1","pic_url":"http://hshop.com/web/uploads/image/store_1/be34db0aa339f09d621f23669c25b2ca6b4dad24.png","title":"暂无标题","page_url":"","sort":"100","addtime":"1583724575","is_delete":"0","type":"1","open_type":"navigate"}],"nav_icon_list":[{"name":"砍价","pic_url":"http://hshop.com/web/uploads/image/store_1/aab7705db38adeee20fcb117691580460bc266d5.jpg","url":"/bargain/list/list","open_type":"navigate"},{"name":"红包","pic_url":"http://hshop.com/web/uploads/image/store_1/42950f3c9b3aed78052a374576d810cfaaf3e258.jpg","url":"/pages/fxhb/open/open","open_type":"navigate"},{"name":"导2","pic_url":"http://hshop.com/web/uploads/image/store_1/be34db0aa339f09d621f23669c25b2ca6b4dad24.png","url":"/pages/integral-mall/register/index","open_type":"navigate"},{"name":"导1","pic_url":"http://hshop.com/web/uploads/image/store_1/160fad3f3accb5e25520c508e1e6a49189219327.jpg","url":"/pages/cat/cat?cat_id=2","open_type":"navigate"}],"cat_goods_cols":2,"cat_list":[{"id":"1","store_id":"1","parent_id":"0","name":"家用电器","pic_url":"http://hshop.com/web/uploads/image/store_1/4d7d7f7322e9ce97a576e219fa7385cd71869861.png","sort":"1","addtime":"1583807515","is_delete":"0","big_pic_url":"http://hshop.com/web/uploads/image/store_1/be34db0aa339f09d621f23669c25b2ca6b4dad24.png","advert_pic":"http://hshop.com/web/uploads/image/store_1/67a82fcc79401e43edfea45cf28947b6feec4665.jpg","advert_url":"/pages/index/index","is_show":"1","page_url":"/pages/list/list?cat_id=1","open_type":"navigate","cat_pic":"http://hshop.com/web/uploads/image/store_1/4d7d7f7322e9ce97a576e219fa7385cd71869861.png","goods_list":[{"id":"1","name":"测试商品","price":"10.00","original_price":"15.00","pic_url":"http://hshop.com/web/uploads/image/store_1/be34db0aa339f09d621f23669c25b2ca6b4dad24.png","num":null,"virtual_sales":"100","unit":"件","is_negotiable":"0","sales":"100件"}]}],"block_list":[{"id":1,"name":"图片魔方1","data":{"pic_list":[{"pic_url":"http://hshop.com/web/uploads/image/store_1/23d9e30145f142bae143c48983c1c9c987f0a61b.jpg","url":"/pond/pond/pond","open_type":"navigate"},{"pic_url":"http://hshop.com/web/uploads/image/store_1/684b5ccb40094f56806046ffbe9788dff63e6b5a.jpg","url":"/pages/coupon/coupon","open_type":"navigate"},{"pic_url":"http://hshop.com/web/uploads/image/store_1/160fad3f3accb5e25520c508e1e6a49189219327.jpg","url":"/scratch/index/index","open_type":"navigate"}]},"style":0},{"id":2,"name":"图片魔方2","data":{"pic_list":[{"pic_url":"http://hshop.com/web/uploads/image/store_1/aab7705db38adeee20fcb117691580460bc266d5.jpg","url":"/pages/list/list?cat_id=2","open_type":"navigate"}]},"style":0}],"coupon_list":[{"id":"2","store_id":"1","name":"优惠券1","desc":"","pic_url":"","discount_type":"2","min_price":"5.00","sub_price":"2.00","discount":"10.0","expire_type":"1","expire_day":"1","begin_time":"1591372800","end_time":"1591459199","addtime":"1591433711","is_delete":"0","total_count":"-1","is_join":"2","sort":"100","cat_id_list":"null","appoint_type":"2","is_integral":"1","integral":"0","price":"0.00","total_num":"0","user_num":"0","rule":"123123","goods_id_list":"[\"1\"]","is_receive":"1","begintime":"2020.06.06","endtime":"2020.06.06","content":"指定商品使用 点击查看指定商品","goods":[{"id":"1"}],"cat":[],"receive_content":"已领取"}],"topic_list":[[{"id":"1","title":"111"}]],"nav_count":0,"notice":"","miaosha":{"name":"15点场","ms_next":false,"date":"","rest_time":3577,"goods_list":[{"id":"141","name":"秒杀商品1","pic":"http://hshop.com/web/uploads/image/store_1/be34db0aa339f09d621f23669c25b2ca6b4dad24.png","price":"15.00","start_time":"15","miaosha_price":"10.00"}]},"pintuan":{"goods_list":[{"id":"1","pic":"http://hshop.com/web/uploads/image/store_1/be34db0aa339f09d621f23669c25b2ca6b4dad24.png","name":"测试商品","price":"10.00","sale_num":100}]},"yuyue":[{"id":"1","name":"啊实打实","cover_pic":"http://hshop.com/web/uploads/image/store_1/160fad3f3accb5e25520c508e1e6a49189219327.jpg","price":"1.00"}],"update_list":{"topic":{"logo_2":"http://hshop.com/web/statics/images/home-page/icon-topic.png","logo_1":"http://hshop.com/web/statics/images/home-page/icon-topic-1.png","heated":"http://hshop.com/web/statics/images/home-page/icon-topic-r.png","count":1,"topic_list":[[{"id":"1","title":"111"}]]},"notice":{"name":"公告","bg_color":"#f67f79","color":"#ffffff","icon":"http://hshop.com/web/statics/images/home-page/icon-notice.png","content":""},"video":[{"name":0,"url":"","pic_url":""}],"coupon":{"bg":"http://hshop.com/web/statics/images/home-page/icon-coupon-index.png","bg_1":"http://hshop.com/web/statics/images/home-page/icon-coupon-no.png","coupon_list":[{"id":"2","store_id":"1","name":"优惠券1","desc":"","pic_url":"","discount_type":"2","min_price":"5.00","sub_price":"2.00","discount":"10.0","expire_type":"1","expire_day":"1","begin_time":"1591372800","end_time":"1591459199","addtime":"1591433711","is_delete":"0","total_count":"-1","is_join":"2","sort":"100","cat_id_list":"null","appoint_type":"2","is_integral":"1","integral":"0","price":"0.00","total_num":"0","user_num":"0","rule":"123123","goods_id_list":"[\"1\"]","is_receive":"1","begintime":"2020.06.06","endtime":"2020.06.06","content":"指定商品使用 点击查看指定商品","goods":[{"id":"1"}],"cat":[],"receive_content":"已领取"}]},"banner":{"banner_list":[{"id":"1","store_id":"1","pic_url":"http://hshop.com/web/uploads/image/store_1/4d7d7f7322e9ce97a576e219fa7385cd71869861.png","title":"1","page_url":"","sort":"100","addtime":"1583724551","is_delete":"0","type":"1","open_type":"navigate"},{"id":"2","store_id":"1","pic_url":"http://hshop.com/web/uploads/image/store_1/be34db0aa339f09d621f23669c25b2ca6b4dad24.png","title":"暂无标题","page_url":"","sort":"100","addtime":"1583724575","is_delete":"0","type":"1","open_type":"navigate"}]}},"act_modal_list":[],"mch_list":[],"template":false}}';
    }
}
